- url = @record.new_record? ? public_send(@entity.create_helper_method) : public_send(@entity.update_helper_method, @record.id)
- method = @record.new_record? ? :post : :patch

= tramway_form_for @record, local: true, url:, method: do |f|
  - if @record.errors.any?
    .w-full.mb-4.p-4.border.border-red-600.bg-red-100.text-red-800.rounded-xl
      %h2.font-bold.mb-2
        = "#{pluralize(@record.errors.count, 'error')} prohibited this record from being saved:"
      %ul.list-disc.list-inside.pl-6
        - @record.errors.full_messages.each do |message|
          %li= message

  - @record.class.fields.each do |(attribute, field_type)|
    = f.tramway_field field_type, attribute

  .flex.flex-row.space-x-2
    = f.submit t('tramway.actions.save')
    = tramway_button text: t('tramway.actions.cancel'),
      path: public_send(@entity.index_helper_method),
      type: :secondary,
      link: true
